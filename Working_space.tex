\include{templete}

\begin{document}
	\part*{Special Topic: Vehicle Routing Problem}\label{VRP}
		\addcontentsline{toc}{part}{Special Topic: Vehicle Routing Problem}
		\chapter{The Traveling Salesman Problem}\label{chp:TSP}
			\section{Formulations}
				In this section, we are going to compare between different formulations of TSP. Generally speaking, let $G = (V, A)$ be a graph where $V$ is a set of $n$ vertices, and $A$ is a set of arcs (or edges). Let $C = c_{ij}$ be a cost (distance) matrix associated with $A$. The TSP consists of determining a minimum cost (distance) Hamiltonian circle (or cycle) that visits each vertex once and only once. If for all $i, j \in V, c_{ij} = c_{ji}$, then the TSP is symmetrical, otherwise is asymmetrical.

				Define the decision variable $x_{ij}$ as the following
				\begin{equation}
					x_{ij} = \begin{cases}
								1, &\text{if goes from } i \text{ to } j\\ 
								0, & \text{otherwise}
							\end{cases}, \quad (i, j) \in A
				\end{equation}

				The objective function will be
				\begin{equation}
					\min \quad \sum_{(i, j)\in A} c_{ij}x_{ij}
				\end{equation}

				\subsection{Dantzig-Fulkerson-Johnson (DFJ) Formulation}
					The first famous formulations for TSP is the \textbf{Dantzig-Fulkerson-Johnson (DFJ) formulation}:
					\begin{align}
						\sum_{j \in V, (i,j)\in A} x_{ij} & = 1, \quad \forall i \in V \label{TSP:con:degree1}\\
						\sum_{i \in V, (i,j)\in A} x_{ij} & = 1, \quad \forall j \in V \label{TSP:con:degree2}\\
						\sum_{j\notin S, i\in S, (i,j)\in A} x_{ij} & \ge 1, \quad \forall S \subset V, 2\le |S| \le n-1 \label{TSP:con:DFJSubtour1}
					\end{align}

					In the formulation, constraints (\ref{TSP:con:degree1}) and constraints (\ref{TSP:con:degree2}) are degree constraints, which specify that every vertex is entered exactly once. Constraints (\ref{TSP:con:DFJSubtour1}) is the sub-tour constraints, they prohibit the formation of sub-tours. $S$ is a non-empty subset of $V$, and has at least 2 vertices. \ref{TSP:con:DFJSubtour1} can be replaced by
					\begin{equation}
						\sum_{i, j \in S, (i, j) \in A} x_{ij} \le |S| - 1, \quad \forall S \subset V, 2\le |S| \le n-1\label{TSP:con:DFJSubtour2}
					\end{equation}

					If we list all sub-tour constraints in DFJ, there will be $O(2^n)$ constraints and $O(n^2)$ binary variables. The exponential number of constraints makes it impractical to solve directly. Instead, lazy constraints are usually implemented for the sub-tour elimination constraints (\ref{TSP:con:DFJSubtour1} or \ref{TSP:con:DFJSubtour2}).

				\subsection{Miller-Tucker-Zemlin (MTZ) Formulation}
					We can also formulate TSP using sequential formulations, namely, \textbf{Miller-Tucker-Zemlin (MTZ) formulation}. In the MTZ formulation, the degree constraints (\ref{TSP:con:degree1} and \ref{TSP:con:degree2}) are the same as in DFJ formulation.

					Define a new set of integer decision variables $u_i$, $u_i$ defined as the sequence in which node $i$ is visited, $u_1 = 1$.

					The sub-tour constraints (\ref{TSP:con:DFJSubtour1} or \ref{TSP:con:DFJSubtour2}) are replaced by the following:
					\begin{align}
						u_i - u_j + (n - 1) x_{ij} &\le n - 2, \quad i, j = 2, \cdots, n \in V, (i, j) \in A \label{TSP:con:MTZ1}\\
						1 & \le u_i \le n - 1, \quad i \in 2, \cdots, n \in V \label{TSP:con:MTZ2}
					\end{align}

					In MTZ formulation, there are $O(n^2)$ constraints, $O(n^2)$ binary variables, and $O(n)$ continuous variables.

				\subsection{Quadratic Formulation (QAP)}
					In this section, we are going to go over a TSP formulation are super bad. However, it still has some value for further study.

					The idea is to transform TSP into an assignment problem. Assuming we have $n$ boxes, which represents $n$ steps in the path. Define $x_{ij}$ as 
					\begin{equation}
						x_{ij} = \begin{cases}
									1, \quad \text{Vertex $i$ is assigned to box $j$}\\
									0, \quad \text{Otherwise}
								\end{cases}
					\end{equation}

					The constraints are simple as an assignment problem as following
					\begin{align}
						\sum_{j = 1}^n x_{ij} &= 1, \quad \forall i \in V\\
						\sum_{i \in V}^n x_{ij} &= 1, \quad j = 1, \dots, n
					\end{align}

					However, the tricky part is in the objective function
					\begin{equation}
						\min \quad \sum_{i \in V} \sum_{j \in V \setminus \{i\}} \sum_{k = 1}^{n - 1} c_{ij} x_{ik} x_{j, k + 1} + \sum_{i \in V} \sum_{j \in V \setminus \{i\}} c_{ij}x_{in}x_{j1}
					\end{equation}

					Notice that the objective function is not linear function, with the multiplications of decision variables. Now we are going to linearize them. The linearized version is as following

					\begin{align}
						\min \quad & \sum_{i \in V} \sum_{j \in V \setminus \{i\}} \sum_{k = 1}^{n - 1} c_{ij} w_{ij}^k + \sum_{i \in V} \sum_{j \in V \setminus \{i\}} c_{ij}w_{ij}^n\\
						\text{s.t.} \quad & \sum_{j = 1}^n x_{ij} = 1, \quad \forall i \in V\\
										  & \sum_{i \in V}^n x_{ij} = 1, \quad j = 1, \dots, n\\
										  & w_{ij}^k \ge x_{ik} + x_{j, k + 1} - 1, \quad i \in V,  j \in V \setminus \{i\}, k = 1, \cdots, n - 1\\
										  & w_{ij}^k \ge x_{ik} + x_{j1} - 1, \quad i \in V, j \in V \setminus \{i\}, k = n \\
										  & w_{ij}^k \in \{0, 1\}, \quad i \in V, j \in V \setminus \{i\}, k = 1, \dots, n\\
										  & x_{ij} \in \{0, 1\}, \quad i \in V, j \in V \setminus \{i\}
					\end{align}

					We can prove that this is very very bad.

				\subsection{Flow Based Formulations}
					In this section, flow based formulations are discussed, which includes \textbf{Single Commodity Flow}, \textbf{Two Commodity Flow} and \textbf{Multi-Commodity Flow}. In these formulations, continuous variables are introduced to represent the flow on the arcs.

					In Single Commodity Flow formulation, define $y_{ij}$ as the flow in an arc $(i, j) \in A$.

					Degree constraints \ref{TSP:con:degree1} and \ref{TSP:con:degree2} are retained. The following constraints are introduced:
					\begin{align}
						y_{ij} & \le (n - 1) x_{ij}, \quad \forall i, j \in V, (i, j) \in A \label{TSP:con:SCFMaxFlow}\\
						\sum_{j \in V, (1, j) \in A} y_{1j} & = n - 1 \label{TSP:con:SCFInitFlow} \\
						\sum_{i \in V, (i, j) \in A} y_{ij} - \sum_{k \in V, (j, k) \in A} y_{jk} &= 1, \quad \forall j \in V \setminus \{1\} \label{TSP:con:SCFFlowBalance}\\
					\end{align}

					Constraints (\ref{TSP:con:SCFMaxFlow}) can be tighten by the following:
					\begin{align}
						y_{ij} &\le (n - 1) x_{ij}, \quad i = 1, j \in V \setminus \{1\}, (i, j) \in A \label{TSP:con:SCMMaxFlow1} \\
						y_{ij} &\le (n - 2) x_{ij}, \quad i, j \in V \setminus \{1\}, (i, j) \in A \label{TSP:con:SCMMaxFlow2} \\
					\end{align}

					In SCM formulation, there are $O(n^2)$ constraints, $O(n^2)$ binary variables and $O(n^2)$ continuous variables.

					In Two Commodity Flow formulation, define $y_{ij}$ as the flow in an arc $(i, j) \in A$, for commodity type 1, and define $z_{ij}$ as the flow in an arc $(i, j) \in A$, for commodity type 2.

					Besides degree constraints, the other constraints are as following
					\begin{align}
						y_{ij} + z_{ij} &= (n - 1) x_{ij}, \quad \forall i, j \in V, (i, j) \in A \label{TSP:con:TCMFlowExist} \\
						\sum_{j \in V \setminus \{1\}} (y_{1j} - y_{j1}) &= n - 1, \quad (1, j) \in A \label{TSP:con:TCMInitFlowY}\\
						\sum_{j \in V} (y_{ij} - y_{ji}) & = 1, \quad  \forall i \in V \setminus \{1\}, (i, j) \in A \label{TSP:con:TCMFlowBalanceY}\\
						\sum_{j \in V \setminus \{1\}} (z_{1j} - z_{j1}) &= 1 - n, \quad (1, j) \in A \label{TSP:con:TCMInitFlowZ}\\
						\sum_{j \in V} (z_{ij} - z_{ji}) & = -1, \quad  \forall i \in V \setminus \{1\}, (i, j) \in A \label{TSP:con:TCMFlowBalanceZ}\\
						\sum_{j \in V} (y_{ij} + z_{ij}) &= n - 1, \quad \forall i \in V \label{TSP:con:TCMFlowOnArc}\\
					\end{align}

					In TCM formulation, constraints (\ref{TSP:con:TCMFlowExist}) only allow flow in an arc if present. Constraints (\ref{TSP:con:TCMInitFlowY}) and (\ref{TSP:con:TCMFlowBalanceY}) forces $(n - 1)$ units of commodity type 1 to flow in at node 1 and 1 unit to flow out at every other nodes. Constraints (\ref{TSP:con:TCMInitFlowZ}) and (\ref{TSP:con:TCMFlowBalanceZ}) are similar, those forces $(n - 1)$ units of commodity type 2 to flow out at node 1 and 1 unit to flow in at every other nodes. Constraints (\ref{TSP:con:TCMFlowOnArc}) forces exactly $(n - 1)$ units of combined commodity in each arc.

					In TCM formulation, there are $O(n^2)$ constraints, $O(n^2)$ binary variables and $O(n^2)$ continuous variables.

					The SCM and the TCM can be generalized into \textbf{Multi-Commodity Flow formulation}. As usual, degree constraints are retained. The following continuous variables are introduced. Define $y_{ij}^k$ as the flow of commodity type $k$ in arc $(i, j) \in A$.

					The other constraints are
					\begin{align}
						y_{ij}^k &\le x_{ij}, \quad \forall i, j, k \in N, k \neq 1 \label{TSP:con:MCMFlowExist}\\
						\sum_{i \in V} y_{1i}^k &= 1, \quad \forall k \in V \setminus \{1\} \label{TSP:con:MCMInitIn}\\
						\sum_{i \in V} y_{i1}^k &= 0, \quad \forall k \in V \setminus \{1\} \label{TSP:con:MCMInitOut}\\
						\sum_{i \in V} y_{ik}^k &= 1, \quad \forall k \in V \setminus \{1\} \label{TSP:con:MCMElseOut}\\
						\sum_{j \in V} y_{kj}^k &= 0, \quad \forall k \in V \setminus \{1\} \label{TSP:con:MCMElseIn}\\
						\sum_{i \in V} y_{ij}^k - \sum_{i \in V} y_{ji}^k &= 0, \quad \forall j, k \in V \setminus \{1\}, j \neq k \label{TSP:con:MCMBalance}
					\end{align}
					Constraints (\ref{TSP:con:MCMFlowExist}) only allow flow in an arc which is present. Constraints (\ref{TSP:con:MCMInitIn}) forces exactly one unit of each type of commodity to flow in at node 1. Constraints (\ref{TSP:con:MCMInitOut}) prevent any commodity flow out at node 1.Constraints (\ref{TSP:con:MCMElseOut}), and Constraints (\ref{TSP:con:MCMElseIn}), forces exactly one unit of type $k$ commodity to flow out, and in, at every node except node 1. Constraints (\ref{TSP:con:MCMBalance}) forces balance of all types of commodities at every node except node 1.

					This formulation has $O(n^3)$ constraints, $O(n^2)$ binary variables, and $O(n^3)$ continuous variables.

				\subsection{Shortest Path Formulation}
					\fixme{A graph for timed staged shortest path}

					In this section, we are going to introduce another form of formulation with different definition of decision variable and objective function.

					Assuming for a completed graph $G = (V, A)$. Define $x_{ij}^t$ as the following
					\begin{equation}
						x_{ij}^t = \begin{cases}
										1, \quad \text{If path crosses arc } (i, t) \text{ and } (j, t + 1) \\
										0, \quad \text{Otherwise}
									\end{cases}, \quad i \in V, j \in V \setminus \{i\}, t = 1, \cdots, n
					\end{equation}

					The objective function will be
					\begin{equation}
						\min \quad \sum_{i \in V}\sum_{j \in V\setminus \{i\}} c_{ij} \sum_{t = 1}^n x_{ij}^t
					\end{equation}

					The constraints are as following
					\begin{align}
						\sum_{j \in V \setminus \{1\}} x_{1j}^1 &= 1 \label{TSP:con:SPFStart}\\
						\sum_{j \in V \setminus \{1, i\}} x_{ij}^2 - x_{1i}^1 &= 0, \quad \forall i \in V \setminus \{1\} \label{TSP:con:SPFFirstLayer}\\
						\sum_{j \in V \setminus \{1, i\}} x_{ij}^t - \sum_{j \in V \setminus \{1, i\}} x_{ji}^{t - 1} &= 0, \quad \forall i \in V \setminus \{1\}, t \in \{2, \dots, n - 1\} \label{TSP:con:SPFTthLayer}\\
						x_{i1}^n - \sum_{j \in V \setminus \{1, i\}} x_{ji}^{n - 1} &= 0, \quad \forall i \in V \setminus \{1\} \label{TSP:con:SPFLastLayer}\\
						\sum_{i \in V \setminus \{1\}} x_{i1}^n &= 1 \label{TSP:con:SPFEnd}\\
						\sum_{t = 2}^{n - 1}\sum_{j \in V \setminus \{1, i\}} x_{ij}^t + x_{i1}^n & \le 1, \quad \forall i \in V \setminus \{1\} \label{TSP:con:SPFSameType1}
					\end{align}

					Notice that constraint (\ref{TSP:con:SPFSameType1}) can be replaced by
					\begin{equation}
						x_{1i}^1 + \sum_{t = 2}^{n - 1}\sum_{j \in V \setminus \{1, i\}} x_{ji}^t \le 1, \quad \forall i \in V \setminus \{1\} \label{TSP:con:SPFSameType2}
					\end{equation}

			\section{NP Completeness of TSP}
				\subsection{Proof of TSP $\in$ NPC}

				\subsection{Polynomially Solvable Special Cases of TSP}

			\section{Lower Bounds of TSP}
				\subsection{The Assignment Lower Bound}

				\subsection{The Minimum Spanning Tree (Arborescence) Bound}

				\subsection{The 2-match Problem}

				\subsection{Held \& Karp Bound (Lagrangian Relaxation)}
					In this section, we will solve the Dantzig-Fulkerson-Johnson formulation using Lagrangian Relaxation. The bound found by this method is also known as Held \& Karp Bound. In the Held \& Karp relaxation, the degree constraints are relaxed, as a result, we require our solution to be connected and to contain $n$ edges, but it might not have exactly two edges incident to each vertex.

					The feasible solution to the Lagrangian relaxation is called \textbf{1-tree}, which
					\begin{itemize}
						\item Have a spanning tree on nodes $\{2, 3, \cdots, n\}$
						\item Two edges incident to node 1
					\end{itemize}

			\section{Constructive Heuristic}
				\subsection{Nearest Neighborhood Algorithm}

				\subsection{Insertion Algorithm}

				\subsection{Sweep Algorithm}

				\subsection{Christofides Algorithm}

			\section{Local Search Heuristic}
				\subsection{Lin-Kernighan Algorithm}
					The general idea of Lin-Kernighan Algorithm is based on a substantial generalization of the interchange transformation.

			\section{Metaheuristic}
				\subsection{Simulated Annealing}

				\subsection{Genetic Algorithm}

		\chapter{The Vehicle Routing Problem}
			\section{The Family of VRP}


			\section{Heuristic for VRP}
				\subsection{CW Saving}

		\chapter{The Capacitate Vehicle Routing Problem}
			\section{Formulations}
				In this section, we present four important formulations for the CVRP, the problem statement is as follows. The transportation requests consist of the distribution of goods from a single depot, denote as node 0, to a given set of $n$ other locations, or customers, $N = \{1, 2, \cdots, n\}$. The amount that has to be delivered to customer $i \in N$ is called demand, which is given by a scalar $q_i \ge 0$. A fleet of vehicle $K = \{1, 2, \cdots, |K|\}$ is assumed to be homogeneous with the same capacity as $Q > 0$ and identical operation cost. A vehicle that service a subset $S\subseteq N$ starts at the depot, move once to each of the customers in $S$, and finally returns to the depot. A vehicle moving from $i$ to $j$ incurs the travel cost $c_{ij}$. 
				Let $V = \{0\} \cup N$ be the set of nodes, for convenience, we usually define node 0 as depot and an additional node $|N|+1$ as a copy of depot for the returning of vehicle. Set $E$ is the set of all available links between nodes. The CVRP is then defined on graph $G = (V, E)$. We further denote $\delta^+(i) \in V \setminus \{i\}$ as the set of nodes that can be visited from node $i$, and denote $\delta^-(i) \in V\setminus \{i\}$ as the set of nodes that can visit node $i$.

				\subsection{Golden et al. 1977}
					Golden et al. 1997 proposed a 3-indexed formulation for solving CVRP. The resulting formulation involves $O(n^2T)$ variables and requires an exponential number of subtour elimination constraints. 

					Decision variables are
					\begin{equation*}
						x_{ij}^k = \begin{cases}
										1, \quad \text{If vehicle } k \text{ travels through arc } (i, j) \\
										0, \quad \text{Otherwise}
									\end{cases} \quad (i, j) \in E, k \in \{1, 2, \cdots, T\}
					\end{equation*}
					where $T$ is the maximum number of vehicle.

					The objective function is
					\begin{equation*}
						\min \sum_{k = 1}^T \sum_{(i, j) \in E} c_{ij} x_{ij}^k
					\end{equation*}

					The constraints are as following
					\begin{align}
						\sum_{k = 1}^T \sum_{j \in \delta^+(i)} x_{ij}^k &= 1, \quad i \in V \setminus \{0\} \label{VRP:con:GoldenArcAssign}\\
						\sum_{j \in \delta^+(i)} x_{ij}^k &= \sum_{j \in \delta^-(i)} x_{ji}^k, \quad \forall i \in V \setminus \{0\}, k = \{1, 2, \cdots, T\} \label{VRP:con:GoldenBalance} \\
						\sum_{i \in \delta^+(0)} x_{0i}^k &\le 1, \quad k \in \{1, 2, \ldots, T\} \label{VRP:con:GoldenLeaveDepot} \\
						\sum_{i \in \delta^-(0)} x_{i0}^k &\le 1, \quad k \in \{1, 2, \ldots, T\} \label{VRP:con:GoldenReturnDepot} \\
						\sum_{i \in V} d_i \sum_{j \in \delta^+(i)} x_{ij}^k &\le Q, \quad k \in \{1, 2, \ldots, T\} \label{VRP:con:GoldenCap}\\
						\sum_{(i, j)\in E(S)} x_{ij}^k &\le |S| - 1, \quad \forall S\subset V\setminus \{0\}, k \in \{1, 2, \ldots, T\} \label{VRP:con:GoldenSubtour}
					\end{align}

				\subsection{Two-index Flow Formulation, }

		\chapter{The Vehicle Routing Problem with Time Windows}

		\chapter{Pickup-and-Delivery Problem}\label{chp:PDP}
			\section{Problem Formulation}
				Let $N$ be the set of transportation requests. For each transportation request $i \in N$, a load of size $\bar{q_i} \in \mathbb{N}$ has to be transported from a set of origins $N_i^+$ to a set of destinations $N_i^-$. Each load is subdivided as follows
				\begin{equation}
					\bar{q_i} = \sum_{j \in N_i^+} q_j = -\sum_{j \in N_i^-} q_j
				\end{equation}

				Define $N^+ = \cup_{i \in N} N_i^+$ as the set of all origins and $N^- = \cup_{i \in N}N_i^-$ as the set of all destinations. Let $V = N^+ \cup N^-$. Furthermore, the $M$ be the set of vehicles. Each vehicle $k \in M$ has a capacity $Q_k \in \mathbb{N}$, a start location $k^+$, and an end location $k^-$. Define $M^+ = \{k^+|k\in M\}$ as the set of start locations and $M^- = \{k^-|k\in M\}$ as the set of end locations. Let $W = M^+ \cup M^-$.

				For all $i, j \in V\cup W$ let $d_{ij}$ denote the travel distance, $t_{ij}$ denote the travel time, and $c_{ij}$ denote the travel cost. Note that the dwell time at origins and destinations can be easily incorporated in the travel time and therefore will not be considered explicitly.

				\begin{definition}
					A pickup and delivery route $R_k$ for vehicle $k$ is a directed route through a subset $V_k \in V$ such that:
					\begin{itemize}
						\item $R_k$ starts in $k^+$
						\item $\forall i \in N, (N_i^+ \cup N_i^-) \cap V_k = \emptyset \text{ or } N_i^+ \cup N_i^-$
						\item If $N_i^+ \cup N_i^- \subseteq V_k$, then all locations in $N_i^+$ are visited before locations in $N_i^-$
						\item Vehicle $k$ visits each location in $V_k$ exactly once
						\item The vehicle load never exceeds $Q_k$
						\item $R_k$ ends in $k^-$
					\end{itemize}
				\end{definition}

				\begin{definition}
					A pickup and delivery plan is a set of routes $\mathcal{R} = \{R_k |k \in M\}$ such that:
					\begin{itemize}
						\item $R_k$ is the pickup and delivery route for vehicle $k$, for each $k \in M$
						\item $\{V_k |k \in M\}$ is a partition of $V$,
					\end{itemize}
				\end{definition}

				Here are the special cases of the General Pickup and Delivery Problem
				\begin{example}
					\textbf{The pickup and delivery problem}, where $|W| = 1$, $|N_i^+| = |N_i^-| = 1, \forall i \in N$. In this case we define $i^+$ as the unique element of $|N_i^+|$ and $i^-$ as the unique element of $|N_i^-|$.
				\end{example}

				\begin{example}
					\textbf{The dial-a-ride problem}, where $|W| = 1$ and $|N_i^+| = |N_i^-| = 1, \bar{q_i} = 1, \forall i \in N$
				\end{example}

				\begin{example}
					\textbf{The vehicle routing problem}, where $|W| = 1$, $|N_i^+| = |N_i^-| = 1 \forall i \in N$ and $N^+ = W$ or $N^- = W$.
				\end{example}

				\notice{Generally speaking, we usually have problem with $|N_i^+| = |N_i^-| = 1$. In the cases where $|N_i^+| > 1$ or $|N_i^-| > 1$, the transportation requests can be decomposed into several independent requests with $|N_i^+| = |N_i^-| = 1$, unless it has to be served by the same vehicle.}

				\notice{We are not aware of any real-life applications where both $|N_i^+| > 1$ and $|N_i^-| > 1$ at the same time yet.}

				The following is the formulation for General Pickup and Delivery Problem.

				\begin{table}[!htp]
					\centering
					\caption{Decision variable notation}
					\begin{tabular}{l p{5in}}
						\hline
						$z_i^k$ & For $i \in N, k \in M$ Equals to 1 if transportation request $i$ is assigned to vehicle $k$ and 0 otherwise. \\
						$x_{ij}^k$ & For $(i, j) \in (V \times V) \cup \{(k^+, j)| j \in V\} \cup \{(j, k^-)|j \in V\}, k \in $ Equals to 1 if vehicle $k$ travels from location $i$ to location $j$ and 0 otherwise.\\
						$D_i$ & For $i \in V\cup W$, specifying the departure time at vertex $i$.\\
						$y_i$ & For $i \in V\cup W$, specifying the load of vehicle arriving at vertex $i$. Define $q_{k^+} = 0, \forall k \in M$.\\
						\hline	
					\end{tabular}
				\end{table}

				\begin{align}
					\min \quad & f(x) &\\
					\text{s.t.} \quad & \sum_{k \in M} z_i^k = 1 \quad & \forall i \in N \label{PDP:con:vehAss}\\
					& \sum_{j\in V\cup W} x_{lj}^k = z_i^k \quad & \forall i \in N, l\in N_i^+ \cup N_i^-, k \in M \label{PDP:con:routeAss1}\\
					& \sum_{j\in V\cup W} x_{jl}^k = z_i^k \quad & \forall i \in N, l\in N_i^+ \cup N_i^-, k \in M \label{PDP:con:routeAss2}\\
					& \sum_{j \in V \cup \{k^-\}}x_{k^+j}^k = 1 \quad & \forall k \in M \label{PDP:con:leaveDepot}\\
					& \sum_{j \in V \cup \{k^+\}}x_{ik^-}^k = 1 \quad & \forall k \in M \label{PDP:con:arriveDepot}\\
					& D_{k^+} = 0 \quad & \forall k \in M \label{PDP:con:initTime}\\
					& D_p \le D_q \quad & \forall i \in N, p \in N_i^+, q \in N_i^- \label{PDP:con:pdOrder}\\
					& D_i + t_{ij} \le D_j + M(1 - x_{ij}^k) \quad & \forall i, j \in V\cup W, k \in M \label{PDP:con:travelDist} \\
					& y_{k^+} = 0 \quad & \forall k \in M \label{PDP:con:initLoad}\\
					& y_l \le \sum_{k \in M} Q_k z_i^k \quad & \forall i \in N, l \in N_i^+\cup N_i^- \label{PDP:con:maxLoad} \\
					& y_j \ge y_l + q_i x_{lj}^k - M(1 - x_{lj}^x) \quad & \forall i \in N, l\in N_i^+, j \in V\cup \{k^+\}, l \neq j \label{PDP:con:loadChange1}\\
					& y_j \le y_l + q_i x_{lj}^k + M(1 - x_{lj}^x) \quad & \forall i \in N, l\in N_i^+, j \in V\cup \{k^+\}, l \neq j \label{PDP:con:loadChange2}\\
					& y_j \ge y_l - q_i x_{lj}^k - M(1 - x_{lj}^x) \quad & \forall i \in N, l\in N_i^-, j \in V\cup \{k^-\}, l \neq j \label{PDP:con:loadChange3}\\
					& y_j \le y_l - q_i x_{lj}^k + M(1 - x_{lj}^x) \quad & \forall i \in N, l\in N_i^-, j \in V\cup \{k^-\}, l \neq j \label{PDP:con:loadChange4}\\
					& x_{ij}^k \in \{0, 1\} \quad & \forall i, j \in V \cup W, k\in M \label{PDP:con:binary1}\\
					& z_i^k \in \{0, 1\} \quad & \forall i \in N, k \in M \label{PDP:con:binary2}\\
					& D_i \ge 0 \quad & \forall i \in V\cup W \label{PDP:con:nonneg1}\\
					& y_i \ge 0 \quad & \forall i \in V\cup W \label{PDP:con:nonneg2}
				\end{align}

				Explanation of constraints:
				\begin{itemize}
					\item Constraint (\ref{PDP:con:vehAss}) - Each transportation request is assigned to exactly one vehicle.
					\item Constraints (\ref{PDP:con:routeAss1}), (\ref{PDP:con:routeAss2}) - A vehicle only enters or leaves a location $l$ if it is an origin or a destination of a transportation request assigned to that vehicle.
					\item Constraints (\ref{PDP:con:leaveDepot}), (\ref{PDP:con:arriveDepot}) - Make sure the vehicle is leaving from /arriving at the correct place.
					\item Constraint (\ref{PDP:con:initTime}) - Initial starting time for all vehicles is 0.
					\item Constraint (\ref{PDP:con:pdOrder}) - For each item to be delivered, it should be picked up before delivery
					\item Constraint (\ref{PDP:con:travelDist}) - Traveling distance from location $i$ to $j$
					\item Constraint (\ref{PDP:con:initLoad}) - All vehicles leaving the initial location with no loading.
					\item Constraint (\ref{PDP:con:maxLoad}) - Load capacity limit for vehicles.
					\item Constraints (\ref{PDP:con:loadChange1}), (\ref{PDP:con:loadChange2}), (\ref{PDP:con:loadChange3}), (\ref{PDP:con:loadChange4}) - Load / unload item when arriving pickup / delivery location
					\item Constraints (\ref{PDP:con:binary1}), (\ref{PDP:con:binary2}), (\ref{PDP:con:nonneg1}), (\ref{PDP:con:nonneg2}) - Binary variable definition and non-negativity constraints.
				\end{itemize}

			\section{Heuristic Method}
				\citep{Renaud2002}

		\chapter{Stochastic Vehicle Routing Problem}

		\chapter{Dynamic Vehicle Routing Problem}

	\bibliography{bib}
\end{document}